- name: allowed-queries
  definition:
    queries:
      - name: InsertTxMetadata
        query: |
          mutation InsertTxMetadata ($timepoint_height: Int!, $timepoint_index: Int!, $call_data: String!, $chain: String!, $multisig: String!, $description: String!, $change_config_details: json) {
            insert_tx_metadata(objects: {timepoint_height:$timepoint_height,timepoint_index:$timepoint_index,call_data:$call_data,chain:$chain,multisig:$multisig,description:$description,change_config_details:$change_config_details}) {
              affected_rows
              returning {
                created
              }
            }
          }
      - name: TxMetadataByPk
        query: |
          query TxMetadataByPk ($timepoint_height: Int!, $timepoint_index: Int!, $multisig: String!, $chain: String!) {
            tx_metadata_by_pk(multisig: $multisig, timepoint_height: $timepoint_height, timepoint_index: $timepoint_index, chain: $chain) {
              call_data
              description
              change_config_details
            }
          }
      - name: AllChangeConfigAttempts
        query: |
          query AllChangeConfigAttempts ($multisig: String!, $chain: String!) {
            tx_metadata(where: {multisig:{_eq:$multisig},chain:{_eq:$chain},change_config_details:{_is_null:false}}) {
              change_config_details
            }
          }
